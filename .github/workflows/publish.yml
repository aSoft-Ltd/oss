# This file was generated using Kotlin DSL (.github/workflows/publish.main.kts).
# If you want to modify the workflow, please change the Kotlin file and regenerate this YAML file.
# Generated with https://github.com/typesafegithub/github-workflows-kt

name: 'Build, Cache then Publish'
on:
  push:
    branches:
    - 'main'
env:
  ORG_GRADLE_PROJECT_mavenCentralUsername: '${{ secrets.ASOFT_NEXUS_USERNAME }}'
  ORG_GRADLE_PROJECT_mavenCentralPassword: '${{ secrets.ASOFT_NEXUS_PASSWORD }}'
  ORG_GRADLE_PROJECT_signingInMemoryKey: '${{ secrets.ORG_GRADLE_PROJECT_SIGNINGINMEMORYKEY }}'
  ORG_GRADLE_PROJECT_signingInMemoryKeyPassword: '${{ secrets.ORG_GRADLE_PROJECT_SIGNINGINMEMORYKEYPASSWORD }}'
  TARGETING_ALL: 'true'
jobs:
  symphony-core-builder:
    runs-on: 'macos-latest'
    steps:
    - id: 'step-0'
      uses: 'actions/checkout@v3'
      with:
        submodules: 'true'
    - id: 'step-1'
      uses: 'actions/setup-java@v3'
      with:
        java-version: '18'
        distribution: 'corretto'
    - id: 'step-2'
      name: 'Make ./gradlew executable'
      working-directory: 'symphony'
      run: 'chmod +x ./gradlew'
    - id: 'step-3'
      name: 'building symphony-visibility'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :symphony-visibility:build'
        build-root-directory: './symphony'
    - id: 'step-4'
      name: 'building symphony-paginator'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :symphony-paginator:build'
        build-root-directory: './symphony'
    - id: 'step-5'
      name: 'building symphony-selector'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :symphony-selector:build'
        build-root-directory: './symphony'
    - id: 'step-6'
      name: 'building symphony-actions'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :symphony-actions:build'
        build-root-directory: './symphony'
    - id: 'step-7'
      name: 'building symphony-table'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :symphony-table:build'
        build-root-directory: './symphony'
    - id: 'step-8'
      name: 'building symphony-list'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :symphony-list:build'
        build-root-directory: './symphony'
    - id: 'step-9'
      name: 'building symphony-collections'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :symphony-collections:build'
        build-root-directory: './symphony'
  symphony-input-builder:
    runs-on: 'macos-latest'
    steps:
    - id: 'step-0'
      uses: 'actions/checkout@v3'
      with:
        submodules: 'true'
    - id: 'step-1'
      uses: 'actions/setup-java@v3'
      with:
        java-version: '18'
        distribution: 'corretto'
    - id: 'step-2'
      name: 'Make ./gradlew executable'
      working-directory: 'symphony'
      run: 'chmod +x ./gradlew'
    - id: 'step-3'
      name: 'building symphony-input-core'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :symphony-input-core:build'
        build-root-directory: './symphony'
    - id: 'step-4'
      name: 'building symphony-input-text'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :symphony-input-text:build'
        build-root-directory: './symphony'
    - id: 'step-5'
      name: 'building symphony-input-number'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :symphony-input-number:build'
        build-root-directory: './symphony'
    - id: 'step-6'
      name: 'building symphony-input-choice'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :symphony-input-choice:build'
        build-root-directory: './symphony'
    - id: 'step-7'
      name: 'building symphony-input-dialog'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :symphony-input-dialog:build'
        build-root-directory: './symphony'
  captain-builder:
    runs-on: 'macos-latest'
    steps:
    - id: 'step-0'
      uses: 'actions/checkout@v3'
      with:
        submodules: 'true'
    - id: 'step-1'
      uses: 'actions/setup-java@v3'
      with:
        java-version: '18'
        distribution: 'corretto'
    - id: 'step-2'
      name: 'Make ./gradlew executable'
      working-directory: 'captain'
      run: 'chmod +x ./gradlew'
    - id: 'step-3'
      name: 'building captain-navigator-api'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :captain-navigator-api:build'
        build-root-directory: './captain'
    - id: 'step-4'
      name: 'building captain-navigator-browser'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :captain-navigator-browser:build'
        build-root-directory: './captain'
    - id: 'step-5'
      name: 'building captain-navigator-basic'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :captain-navigator-basic:build'
        build-root-directory: './captain'
    - id: 'step-6'
      name: 'building captain-router-core'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :captain-router-core:build'
        build-root-directory: './captain'
    - id: 'step-7'
      name: 'building captain-router-react-core'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :captain-router-react-core:build'
        build-root-directory: './captain'
    - id: 'step-8'
      name: 'building captain-router-react-dom'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :captain-router-react-dom:build'
        build-root-directory: './captain'
    - id: 'step-9'
      name: 'building captain-router-compose-core'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :captain-router-compose-core:build'
        build-root-directory: './captain'
    - id: 'step-10'
      name: 'building captain-router-compose-html'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :captain-router-compose-html:build'
        build-root-directory: './captain'
  raven-builder:
    runs-on: 'macos-latest'
    steps:
    - id: 'step-0'
      uses: 'actions/checkout@v3'
      with:
        submodules: 'true'
    - id: 'step-1'
      uses: 'actions/setup-java@v3'
      with:
        java-version: '18'
        distribution: 'corretto'
    - id: 'step-2'
      name: 'Make ./gradlew executable'
      working-directory: 'raven'
      run: 'chmod +x ./gradlew'
    - id: 'step-3'
      name: 'building raven-core'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-core:build'
        build-root-directory: './raven'
    - id: 'step-4'
      name: 'building raven-config'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-config:build'
        build-root-directory: './raven'
    - id: 'step-5'
      name: 'building raven-outbox-core'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-outbox-core:build'
        build-root-directory: './raven'
    - id: 'step-6'
      name: 'building raven-outbox-local'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-outbox-local:build'
        build-root-directory: './raven'
    - id: 'step-7'
      name: 'building raven-outbox-server'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-outbox-server:build'
        build-root-directory: './raven'
    - id: 'step-8'
      name: 'building raven-outbox-client'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-outbox-client:build'
        build-root-directory: './raven'
    - id: 'step-9'
      name: 'building raven-email-core'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-email-core:build'
        build-root-directory: './raven'
    - id: 'step-10'
      name: 'building raven-email-markup'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-email-markup:build'
        build-root-directory: './raven'
    - id: 'step-11'
      name: 'building raven-email-config'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-email-config:build'
        build-root-directory: './raven'
    - id: 'step-12'
      name: 'building raven-email-console'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-email-console:build'
        build-root-directory: './raven'
    - id: 'step-13'
      name: 'building raven-email-brevo'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-email-brevo:build'
        build-root-directory: './raven'
    - id: 'step-14'
      name: 'building raven-sms-core'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-sms-core:build'
        build-root-directory: './raven'
    - id: 'step-15'
      name: 'building raven-sms-config'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-sms-config:build'
        build-root-directory: './raven'
    - id: 'step-16'
      name: 'building raven-sms-console'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-sms-console:build'
        build-root-directory: './raven'
    - id: 'step-17'
      name: 'building raven-sms-kila'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-sms-kila:build'
        build-root-directory: './raven'
  rendezvous:
    runs-on: 'ubuntu-latest'
    needs:
    - 'symphony-core-builder'
    - 'symphony-input-builder'
    - 'captain-builder'
    - 'raven-builder'
    steps:
    - id: 'step-0'
      run: 'echo "all builds completed. Beginning deployment"'
  symphony-core-publisher:
    runs-on: 'macos-latest'
    needs:
    - 'rendezvous'
    steps:
    - id: 'step-0'
      uses: 'actions/checkout@v3'
      with:
        submodules: 'true'
    - id: 'step-1'
      uses: 'actions/setup-java@v3'
      with:
        java-version: '18'
        distribution: 'corretto'
    - id: 'step-2'
      name: 'Make ./gradlew executable'
      working-directory: 'symphony'
      run: 'chmod +x ./gradlew'
    - id: 'step-3'
      name: 'publishing symphony-visibility, symphony-paginator, symphony-selector, symphony-actions, symphony-table, symphony-list, symphony-collections'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :symphony-visibility:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :symphony-paginator:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :symphony-selector:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :symphony-actions:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :symphony-table:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :symphony-list:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :symphony-collections:publishAllPublicationsToMavenCentral --no-configuration-cache'
        build-root-directory: './symphony'
  symphony-input-publisher:
    runs-on: 'macos-latest'
    needs:
    - 'rendezvous'
    steps:
    - id: 'step-0'
      uses: 'actions/checkout@v3'
      with:
        submodules: 'true'
    - id: 'step-1'
      uses: 'actions/setup-java@v3'
      with:
        java-version: '18'
        distribution: 'corretto'
    - id: 'step-2'
      name: 'Make ./gradlew executable'
      working-directory: 'symphony'
      run: 'chmod +x ./gradlew'
    - id: 'step-3'
      name: 'publishing symphony-input-core, symphony-input-text, symphony-input-number, symphony-input-choice, symphony-input-dialog'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :symphony-input-core:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :symphony-input-text:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :symphony-input-number:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :symphony-input-choice:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :symphony-input-dialog:publishAllPublicationsToMavenCentral --no-configuration-cache'
        build-root-directory: './symphony'
  captain-publisher:
    runs-on: 'macos-latest'
    needs:
    - 'rendezvous'
    steps:
    - id: 'step-0'
      uses: 'actions/checkout@v3'
      with:
        submodules: 'true'
    - id: 'step-1'
      uses: 'actions/setup-java@v3'
      with:
        java-version: '18'
        distribution: 'corretto'
    - id: 'step-2'
      name: 'Make ./gradlew executable'
      working-directory: 'captain'
      run: 'chmod +x ./gradlew'
    - id: 'step-3'
      name: 'publishing captain-navigator-api, captain-navigator-browser, captain-navigator-basic, captain-router-core, captain-router-react-core, captain-router-react-dom, captain-router-compose-core, captain-router-compose-html'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :captain-navigator-api:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :captain-navigator-browser:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :captain-navigator-basic:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :captain-router-core:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :captain-router-react-core:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :captain-router-react-dom:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :captain-router-compose-core:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :captain-router-compose-html:publishAllPublicationsToMavenCentral --no-configuration-cache'
        build-root-directory: './captain'
  raven-publisher:
    runs-on: 'macos-latest'
    needs:
    - 'rendezvous'
    steps:
    - id: 'step-0'
      uses: 'actions/checkout@v3'
      with:
        submodules: 'true'
    - id: 'step-1'
      uses: 'actions/setup-java@v3'
      with:
        java-version: '18'
        distribution: 'corretto'
    - id: 'step-2'
      name: 'Make ./gradlew executable'
      working-directory: 'raven'
      run: 'chmod +x ./gradlew'
    - id: 'step-3'
      name: 'publishing raven-core, raven-config, raven-outbox-core, raven-outbox-local, raven-outbox-server, raven-outbox-client, raven-email-core, raven-email-markup, raven-email-config, raven-email-console, raven-email-brevo, raven-sms-core, raven-sms-config, raven-sms-console, raven-sms-kila'
      uses: 'gradle/gradle-build-action@v2'
      with:
        arguments: 'kotlinUpgradePackageLock :raven-core:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :raven-config:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :raven-outbox-core:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :raven-outbox-local:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :raven-outbox-server:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :raven-outbox-client:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :raven-email-core:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :raven-email-markup:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :raven-email-config:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :raven-email-console:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :raven-email-brevo:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :raven-sms-core:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :raven-sms-config:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :raven-sms-console:publishAllPublicationsToMavenCentral kotlinUpgradePackageLock :raven-sms-kila:publishAllPublicationsToMavenCentral --no-configuration-cache'
        build-root-directory: './raven'

